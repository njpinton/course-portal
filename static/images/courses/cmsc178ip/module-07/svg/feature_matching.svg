<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 400" role="img" aria-label="Feature matching strategies and algorithms">
  <title>Feature Matching</title>
  <desc>Overview of feature matching methods including brute force and FLANN-based matching</desc>

  <defs>
    <linearGradient id="matchBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="850" height="400" fill="url(#matchBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="32" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Feature Matching Strategies</text>

  <!-- Matching visualization -->
  <g transform="translate(30, 60)">
    <rect x="0" y="0" width="500" height="150" fill="white" rx="8" stroke="#3b82f6" stroke-width="2"/>
    <text x="250" y="25" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Descriptor Matching</text>

    <!-- Image 1 -->
    <g transform="translate(30, 45)">
      <rect x="0" y="0" width="180" height="85" fill="#dbeafe" rx="4"/>
      <text x="90" y="-8" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Query Image</text>
      <!-- Features -->
      <circle cx="30" cy="25" r="6" fill="#3b82f6"/>
      <circle cx="80" cy="20" r="6" fill="#3b82f6"/>
      <circle cx="140" cy="30" r="6" fill="#3b82f6"/>
      <circle cx="50" cy="55" r="6" fill="#3b82f6"/>
      <circle cx="120" cy="65" r="6" fill="#3b82f6"/>
    </g>

    <!-- Image 2 -->
    <g transform="translate(290, 45)">
      <rect x="0" y="0" width="180" height="85" fill="#fed7aa" rx="4"/>
      <text x="90" y="-8" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Train Image</text>
      <!-- Features -->
      <circle cx="40" cy="22" r="6" fill="#f97316"/>
      <circle cx="95" cy="18" r="6" fill="#f97316"/>
      <circle cx="150" cy="35" r="6" fill="#f97316"/>
      <circle cx="60" cy="60" r="6" fill="#f97316"/>
      <circle cx="130" cy="70" r="6" fill="#f97316"/>
    </g>

    <!-- Match lines -->
    <g stroke-width="2">
      <line x1="66" y1="90" x2="330" y2="87" stroke="#10b981"/>
      <line x1="116" y1="85" x2="385" y2="83" stroke="#10b981"/>
      <line x1="176" y1="95" x2="440" y2="100" stroke="#10b981"/>
      <line x1="86" y1="120" x2="350" y2="125" stroke="#10b981"/>
      <line x1="156" y1="130" x2="420" y2="135" stroke="#10b981"/>
    </g>
  </g>

  <!-- Brute Force -->
  <g transform="translate(30, 230)">
    <rect x="0" y="0" width="250" height="145" fill="white" rx="8" stroke="#10b981" stroke-width="2"/>
    <text x="125" y="25" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Brute Force Matcher</text>

    <g transform="translate(15, 45)">
      <text x="0" y="0" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Compare every descriptor pair</text>
      <text x="0" y="18" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">• O(N×M) complexity</text>
      <text x="0" y="35" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">• L2 norm (SIFT) or Hamming (ORB)</text>
      <text x="0" y="52" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="9">✓ Exact nearest neighbor</text>
      <text x="0" y="69" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="9">✗ Slow for large feature sets</text>
    </g>

    <rect x="15" y="115" width="220" height="20" fill="#1e293b" rx="3"/>
    <text x="125" y="129" fill="#a78bfa" font-family="Consolas, monospace" font-size="8" text-anchor="middle">cv2.BFMatcher(cv2.NORM_L2)</text>
  </g>

  <!-- FLANN -->
  <g transform="translate(300, 230)">
    <rect x="0" y="0" width="250" height="145" fill="white" rx="8" stroke="#7c3aed" stroke-width="2"/>
    <text x="125" y="25" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">FLANN Matcher</text>

    <g transform="translate(15, 45)">
      <text x="0" y="0" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Fast Library for Approx NN</text>
      <text x="0" y="18" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">• KD-tree or LSH indexing</text>
      <text x="0" y="35" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">• O(N×log(M)) approximate</text>
      <text x="0" y="52" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="9">✓ Much faster for large sets</text>
      <text x="0" y="69" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="9">~ May miss some matches</text>
    </g>

    <rect x="15" y="115" width="220" height="20" fill="#1e293b" rx="3"/>
    <text x="125" y="129" fill="#a78bfa" font-family="Consolas, monospace" font-size="8" text-anchor="middle">cv2.FlannBasedMatcher()</text>
  </g>

  <!-- Ratio Test -->
  <g transform="translate(570, 60)">
    <rect x="0" y="0" width="250" height="315" fill="white" rx="8" stroke="#ef4444" stroke-width="2"/>
    <text x="125" y="25" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Lowe's Ratio Test</text>

    <!-- Concept -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="210" height="80" fill="#fef2f2" rx="4"/>
      <text x="105" y="20" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Filter ambiguous matches:</text>
      <text x="105" y="45" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">d₁ / d₂ &lt; threshold</text>
      <text x="105" y="65" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Typically threshold = 0.7-0.8</text>
    </g>

    <!-- Good match example -->
    <g transform="translate(20, 145)">
      <text x="0" y="0" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600">Good Match:</text>
      <rect x="0" y="10" width="210" height="40" fill="#ecfdf5" rx="3"/>
      <text x="105" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">d₁=10, d₂=50 → 10/50 = 0.2 ✓</text>
      <text x="105" y="45" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Best match much closer than 2nd</text>
    </g>

    <!-- Bad match example -->
    <g transform="translate(20, 205)">
      <text x="0" y="0" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600">Ambiguous Match:</text>
      <rect x="0" y="10" width="210" height="40" fill="#fef2f2" rx="3"/>
      <text x="105" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">d₁=40, d₂=45 → 40/45 = 0.89 ✗</text>
      <text x="105" y="45" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Multiple similar matches = reject</text>
    </g>

    <!-- Code -->
    <g transform="translate(20, 265)">
      <rect x="0" y="0" width="210" height="35" fill="#1e293b" rx="3"/>
      <text x="10" y="15" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">if m.distance &lt; 0.75*n.distance:</text>
      <text x="20" y="28" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">good.append(m)</text>
    </g>
  </g>
</svg>
