<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 420" role="img" aria-label="SIFT feature detection and description pipeline">
  <title>SIFT Features</title>
  <desc>Scale-Invariant Feature Transform showing scale-space extrema detection and descriptor computation</desc>

  <defs>
    <linearGradient id="siftBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="850" height="420" fill="url(#siftBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="32" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">SIFT: Scale-Invariant Feature Transform</text>

  <!-- Step 1: Scale-Space -->
  <g transform="translate(25, 60)">
    <rect x="0" y="0" width="195" height="330" fill="white" rx="8" stroke="#3b82f6" stroke-width="2"/>
    <text x="97" y="25" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">1. Scale-Space Extrema</text>

    <!-- Gaussian pyramid -->
    <g transform="translate(20, 45)">
      <text x="77" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Gaussian Pyramid</text>
      <rect x="27" y="10" width="100" height="60" fill="#dbeafe" rx="2" stroke="#3b82f6"/>
      <rect x="37" y="80" width="80" height="48" fill="#dbeafe" rx="2" stroke="#3b82f6"/>
      <rect x="47" y="138" width="60" height="36" fill="#dbeafe" rx="2" stroke="#3b82f6"/>
      <text x="77" y="45" fill="#333" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">σ, 2σ, 4σ...</text>
    </g>

    <!-- DoG -->
    <g transform="translate(20, 195)">
      <text x="77" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">DoG (Difference of Gaussian)</text>
      <rect x="27" y="10" width="100" height="40" fill="#fed7aa" rx="2" stroke="#f97316"/>
      <rect x="37" y="55" width="80" height="32" fill="#fed7aa" rx="2" stroke="#f97316"/>
      <rect x="47" y="92" width="60" height="24" fill="#fed7aa" rx="2" stroke="#f97316"/>
      <!-- Extrema points -->
      <circle cx="60" cy="30" r="4" fill="#ef4444"/>
      <circle cx="90" cy="72" r="3" fill="#ef4444"/>
      <text x="77" y="130" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Local extrema (keypoints)</text>
    </g>
  </g>

  <!-- Step 2: Keypoint Localization -->
  <g transform="translate(230, 60)">
    <rect x="0" y="0" width="195" height="165" fill="white" rx="8" stroke="#10b981" stroke-width="2"/>
    <text x="97" y="25" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">2. Keypoint Refinement</text>

    <g transform="translate(15, 45)">
      <!-- Sub-pixel localization -->
      <rect x="0" y="0" width="165" height="50" fill="#d1fae5" rx="4"/>
      <text x="82" y="20" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Sub-pixel localization</text>
      <text x="82" y="38" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Taylor expansion fitting</text>
    </g>

    <g transform="translate(15, 105)">
      <!-- Low contrast rejection -->
      <rect x="0" y="0" width="165" height="45" fill="#fef2f2" rx="4"/>
      <text x="82" y="18" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Filter: Low contrast</text>
      <text x="82" y="35" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Filter: Edge responses</text>
    </g>
  </g>

  <!-- Step 3: Orientation Assignment -->
  <g transform="translate(230, 235)">
    <rect x="0" y="0" width="195" height="155" fill="white" rx="8" stroke="#f97316" stroke-width="2"/>
    <text x="97" y="25" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">3. Orientation</text>

    <g transform="translate(30, 45)">
      <!-- Gradient histogram -->
      <rect x="0" y="0" width="135" height="80" fill="#f8f9fa" rx="4"/>
      <!-- Histogram bars -->
      <rect x="10" y="55" width="10" height="20" fill="#f97316"/>
      <rect x="25" y="40" width="10" height="35" fill="#f97316"/>
      <rect x="40" y="25" width="10" height="50" fill="#f97316"/>
      <rect x="55" y="15" width="10" height="60" fill="#ef4444"/>
      <rect x="70" y="30" width="10" height="45" fill="#f97316"/>
      <rect x="85" y="45" width="10" height="30" fill="#f97316"/>
      <rect x="100" y="50" width="10" height="25" fill="#f97316"/>
      <rect x="115" y="60" width="10" height="15" fill="#f97316"/>
      <text x="67" y="95" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">36-bin gradient histogram</text>
    </g>
    <text x="97" y="145" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Peak = dominant orientation</text>
  </g>

  <!-- Step 4: Descriptor -->
  <g transform="translate(435, 60)">
    <rect x="0" y="0" width="385" height="330" fill="white" rx="8" stroke="#7c3aed" stroke-width="2"/>
    <text x="192" y="25" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">4. SIFT Descriptor (128-D)</text>

    <!-- 16x16 region divided into 4x4 -->
    <g transform="translate(30, 50)">
      <text x="65" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">16×16 region → 4×4 cells</text>

      <!-- Grid -->
      <g stroke="#7c3aed" stroke-width="1">
        <rect x="0" y="15" width="130" height="130" fill="#f5f3ff"/>
        <line x1="32.5" y1="15" x2="32.5" y2="145"/>
        <line x1="65" y1="15" x2="65" y2="145"/>
        <line x1="97.5" y1="15" x2="97.5" y2="145"/>
        <line x1="0" y1="47.5" x2="130" y2="47.5"/>
        <line x1="0" y1="80" x2="130" y2="80"/>
        <line x1="0" y1="112.5" x2="130" y2="112.5"/>
      </g>

      <!-- Gradient arrows in cells -->
      <g stroke="#7c3aed" stroke-width="1.5" fill="none">
        <line x1="16" y1="31" x2="16" y2="21" marker-end="url(#arrowPurple)"/>
        <line x1="48" y1="35" x2="58" y2="25"/>
        <line x1="80" y1="28" x2="90" y2="38"/>
        <line x1="113" y1="40" x2="103" y2="30"/>
      </g>
      <defs>
        <marker id="arrowPurple" markerWidth="5" markerHeight="4" refX="4" refY="2" orient="auto">
          <polygon points="0 0, 5 2, 0 4" fill="#7c3aed"/>
        </marker>
      </defs>

      <text x="65" y="165" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Each cell: 8-bin histogram</text>
    </g>

    <!-- Descriptor vector -->
    <g transform="translate(180, 50)">
      <text x="90" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">4×4×8 = 128 dimensions</text>

      <rect x="0" y="15" width="180" height="80" fill="#ede9fe" rx="4"/>
      <!-- Vector representation -->
      <g transform="translate(10, 30)">
        <rect x="0" y="0" width="8" height="25" fill="#7c3aed" opacity="0.3"/>
        <rect x="10" y="0" width="8" height="40" fill="#7c3aed" opacity="0.5"/>
        <rect x="20" y="0" width="8" height="20" fill="#7c3aed" opacity="0.4"/>
        <rect x="30" y="0" width="8" height="35" fill="#7c3aed" opacity="0.6"/>
        <text x="45" y="25" fill="#666" font-family="Segoe UI, sans-serif" font-size="10">...</text>
        <rect x="55" y="0" width="8" height="30" fill="#7c3aed" opacity="0.5"/>
        <rect x="65" y="0" width="8" height="15" fill="#7c3aed" opacity="0.3"/>
        <rect x="75" y="0" width="8" height="45" fill="#7c3aed" opacity="0.7"/>
        <text x="90" y="25" fill="#666" font-family="Segoe UI, sans-serif" font-size="10">...</text>
        <rect x="105" y="0" width="8" height="28" fill="#7c3aed" opacity="0.5"/>
        <rect x="115" y="0" width="8" height="38" fill="#7c3aed" opacity="0.6"/>
        <rect x="125" y="0" width="8" height="22" fill="#7c3aed" opacity="0.4"/>
        <rect x="135" y="0" width="8" height="33" fill="#7c3aed" opacity="0.5"/>
        <rect x="145" y="0" width="8" height="18" fill="#7c3aed" opacity="0.3"/>
        <rect x="155" y="0" width="8" height="42" fill="#7c3aed" opacity="0.7"/>
      </g>
      <text x="90" y="70" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Normalized → 128-D vector</text>
    </g>

    <!-- Properties -->
    <g transform="translate(30, 210)">
      <text x="0" y="0" fill="#333" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600">SIFT Properties:</text>
      <g transform="translate(0, 18)">
        <circle cx="6" cy="6" r="4" fill="#10b981"/>
        <text x="16" y="10" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Scale invariant (multi-scale detection)</text>
      </g>
      <g transform="translate(0, 38)">
        <circle cx="6" cy="6" r="4" fill="#10b981"/>
        <text x="16" y="10" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Rotation invariant (orientation assignment)</text>
      </g>
      <g transform="translate(0, 58)">
        <circle cx="6" cy="6" r="4" fill="#10b981"/>
        <text x="16" y="10" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Robust to illumination, noise, viewpoint</text>
      </g>
      <g transform="translate(0, 78)">
        <circle cx="6" cy="6" r="4" fill="#f97316"/>
        <text x="16" y="10" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Computationally expensive</text>
      </g>
      <g transform="translate(0, 98)">
        <circle cx="6" cy="6" r="4" fill="#3b82f6"/>
        <text x="16" y="10" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">cv2.SIFT_create()</text>
      </g>
    </g>
  </g>
</svg>
