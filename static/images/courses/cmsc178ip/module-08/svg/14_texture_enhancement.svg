<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 400" role="img" aria-label="Texture enhancement using top-hat and bottom-hat transforms">
  <title>Texture Enhancement</title>
  <desc>Using morphological top-hat and bottom-hat transforms for texture extraction and enhancement</desc>

  <defs>
    <linearGradient id="texEnhBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="850" height="400" fill="url(#texEnhBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="32" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Texture Enhancement: Top-Hat &amp; Bottom-Hat</text>

  <!-- Top-Hat Transform -->
  <g transform="translate(30, 55)">
    <rect x="0" y="0" width="400" height="160" fill="white" rx="8" stroke="#3b82f6" stroke-width="2"/>
    <text x="200" y="22" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Top-Hat (White Top-Hat)</text>

    <g transform="translate(20, 40)">
      <!-- Original with bright features -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="100" height="80" fill="#666" rx="4"/>
        <!-- Small bright spots/texture -->
        <circle cx="25" cy="25" r="8" fill="#ccc"/>
        <circle cx="60" cy="40" r="6" fill="#bbb"/>
        <circle cx="35" cy="60" r="7" fill="#ddd"/>
        <circle cx="75" cy="65" r="5" fill="#ccc"/>
        <text x="50" y="95" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Original</text>
      </g>

      <!-- Formula -->
      <g transform="translate(115, 25)">
        <text x="0" y="15" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">−</text>
        <text x="20" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="8">opening</text>
        <text x="40" y="15" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">=</text>
      </g>

      <!-- Result: bright features -->
      <g transform="translate(175, 0)">
        <rect x="0" y="0" width="100" height="80" fill="#1a1a2e" rx="4"/>
        <!-- Extracted bright spots -->
        <circle cx="25" cy="25" r="8" fill="white" opacity="0.8"/>
        <circle cx="60" cy="40" r="6" fill="white" opacity="0.7"/>
        <circle cx="35" cy="60" r="7" fill="white" opacity="0.9"/>
        <circle cx="75" cy="65" r="5" fill="white" opacity="0.7"/>
        <text x="50" y="95" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle" font-weight="600">Bright features</text>
      </g>

      <!-- Explanation -->
      <g transform="translate(290, 5)">
        <rect x="0" y="0" width="90" height="70" fill="#dbeafe" rx="4"/>
        <text x="45" y="15" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle" font-weight="600">f − open(f)</text>
        <text x="45" y="32" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Extracts bright</text>
        <text x="45" y="44" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">peaks smaller</text>
        <text x="45" y="56" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">than SE</text>
      </g>
    </g>
  </g>

  <!-- Bottom-Hat Transform -->
  <g transform="translate(445, 55)">
    <rect x="0" y="0" width="375" height="160" fill="white" rx="8" stroke="#7c3aed" stroke-width="2"/>
    <text x="187" y="22" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Bottom-Hat (Black Top-Hat)</text>

    <g transform="translate(20, 40)">
      <!-- Original with dark features -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="100" height="80" fill="#aaa" rx="4"/>
        <!-- Small dark spots/texture -->
        <circle cx="25" cy="25" r="8" fill="#444"/>
        <circle cx="60" cy="40" r="6" fill="#555"/>
        <circle cx="35" cy="60" r="7" fill="#333"/>
        <circle cx="75" cy="65" r="5" fill="#444"/>
        <text x="50" y="95" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Original</text>
      </g>

      <!-- Formula -->
      <g transform="translate(115, 25)">
        <text x="0" y="0" fill="#666" font-family="Segoe UI, sans-serif" font-size="8">closing</text>
        <text x="0" y="15" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">−</text>
        <text x="25" y="15" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">=</text>
      </g>

      <!-- Result: dark features -->
      <g transform="translate(160, 0)">
        <rect x="0" y="0" width="100" height="80" fill="#1a1a2e" rx="4"/>
        <!-- Extracted dark spots shown as bright -->
        <circle cx="25" cy="25" r="8" fill="white" opacity="0.8"/>
        <circle cx="60" cy="40" r="6" fill="white" opacity="0.7"/>
        <circle cx="35" cy="60" r="7" fill="white" opacity="0.9"/>
        <circle cx="75" cy="65" r="5" fill="white" opacity="0.7"/>
        <text x="50" y="95" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle" font-weight="600">Dark features</text>
      </g>

      <!-- Explanation -->
      <g transform="translate(275, 5)">
        <rect x="0" y="0" width="80" height="70" fill="#f5f3ff" rx="4"/>
        <text x="40" y="15" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle" font-weight="600">close(f) − f</text>
        <text x="40" y="32" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Extracts dark</text>
        <text x="40" y="44" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">valleys smaller</text>
        <text x="40" y="56" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">than SE</text>
      </g>
    </g>
  </g>

  <!-- Combined Enhancement -->
  <g transform="translate(30, 230)">
    <rect x="0" y="0" width="530" height="145" fill="white" rx="8" stroke="#10b981" stroke-width="2"/>
    <text x="265" y="22" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">Texture Enhancement Application</text>

    <g transform="translate(25, 45)">
      <!-- Original low contrast -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="95" height="70" fill="#777" rx="4"/>
        <rect x="10" y="10" width="20" height="15" fill="#888"/>
        <rect x="40" y="20" width="25" height="20" fill="#666"/>
        <circle cx="75" cy="50" r="12" fill="#8a8a8a"/>
        <text x="47" y="85" fill="#666" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Low contrast</text>
      </g>

      <!-- Plus -->
      <text x="108" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">+</text>

      <!-- Top-hat -->
      <g transform="translate(125, 0)">
        <rect x="0" y="0" width="95" height="70" fill="#1a1a2e" rx="4"/>
        <rect x="10" y="10" width="20" height="15" fill="white" opacity="0.5"/>
        <text x="47" y="85" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Top-hat</text>
      </g>

      <!-- Minus -->
      <text x="233" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">−</text>

      <!-- Bottom-hat -->
      <g transform="translate(250, 0)">
        <rect x="0" y="0" width="95" height="70" fill="#1a1a2e" rx="4"/>
        <circle cx="75" cy="50" r="12" fill="white" opacity="0.5"/>
        <text x="47" y="85" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">Bottom-hat</text>
      </g>

      <!-- Equals -->
      <text x="358" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="14">=</text>

      <!-- Enhanced result -->
      <g transform="translate(380, 0)">
        <rect x="0" y="0" width="110" height="70" fill="#555" rx="4" stroke="#10b981" stroke-width="2"/>
        <rect x="10" y="10" width="20" height="15" fill="#fff"/>
        <rect x="40" y="20" width="25" height="20" fill="#222"/>
        <circle cx="85" cy="50" r="12" fill="#333"/>
        <text x="55" y="85" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle" font-weight="600">Enhanced contrast</text>
      </g>
    </g>
  </g>

  <!-- Code -->
  <g transform="translate(575, 230)">
    <rect x="0" y="0" width="245" height="145" fill="white" rx="8" stroke="#f97316" stroke-width="2"/>
    <text x="122" y="22" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" text-anchor="middle">OpenCV Code</text>

    <g transform="translate(10, 38)">
      <rect x="0" y="0" width="225" height="95" fill="#1e293b" rx="4"/>
      <text x="10" y="15" fill="#a78bfa" font-family="Consolas, monospace" font-size="8"># Top-hat (white)</text>
      <text x="10" y="28" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">tophat = cv2.morphologyEx(img,</text>
      <text x="20" y="41" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">cv2.MORPH_TOPHAT, kernel)</text>
      <text x="10" y="58" fill="#a78bfa" font-family="Consolas, monospace" font-size="8"># Bottom-hat (black)</text>
      <text x="10" y="71" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">blackhat = cv2.morphologyEx(img,</text>
      <text x="20" y="84" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">cv2.MORPH_BLACKHAT, kernel)</text>
    </g>
  </g>
</svg>
