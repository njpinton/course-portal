<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 400" role="img" aria-label="Opening and closing morphological operations">
  <title>Opening and Closing</title>
  <desc>Compound morphological operations: opening (erosion then dilation) and closing (dilation then erosion)</desc>

  <defs>
    <linearGradient id="ocBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="850" height="400" fill="url(#ocBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="32" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Morphological Opening &amp; Closing</text>

  <!-- Opening -->
  <g transform="translate(30, 55)">
    <rect x="0" y="0" width="790" height="155" fill="white" rx="8" stroke="#3b82f6" stroke-width="2"/>
    <text x="395" y="22" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Opening = Erosion → Dilation  (Removes small foreground noise)</text>

    <g transform="translate(25, 40)">
      <!-- Original with noise -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="25" y="15" width="70" height="55" fill="#333" rx="3"/>
        <!-- Small noise particles -->
        <rect x="15" y="10" width="6" height="6" fill="#333"/>
        <rect x="100" y="20" width="5" height="5" fill="#333"/>
        <rect x="10" y="60" width="8" height="8" fill="#333"/>
        <rect x="105" y="65" width="6" height="6" fill="#333"/>
        <text x="60" y="100" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Original + noise</text>
      </g>

      <!-- Arrow 1 -->
      <g transform="translate(135, 35)">
        <text x="0" y="10" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600">Erode</text>
        <text x="30" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="16">→</text>
      </g>

      <!-- After erosion -->
      <g transform="translate(190, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="30" y="20" width="60" height="45" fill="#333" rx="3"/>
        <!-- Noise removed -->
        <text x="60" y="100" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Noise removed</text>
      </g>

      <!-- Arrow 2 -->
      <g transform="translate(325, 35)">
        <text x="0" y="10" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600">Dilate</text>
        <text x="28" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="16">→</text>
      </g>

      <!-- After opening (final) -->
      <g transform="translate(380, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="25" y="15" width="70" height="55" fill="#333" rx="3"/>
        <text x="60" y="100" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Opened (clean)</text>
      </g>

      <!-- Properties -->
      <g transform="translate(525, 5)">
        <text x="0" y="0" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600">Properties:</text>
        <text x="0" y="18" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="8">✓ Removes small bright spots</text>
        <text x="0" y="33" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="8">✓ Separates thin connections</text>
        <text x="0" y="48" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="8">✓ Smooths object contours</text>
        <text x="0" y="65" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="9" font-weight="600">A ∘ B = (A ⊖ B) ⊕ B</text>
        <rect x="0" y="75" width="200" height="20" fill="#1e293b" rx="3"/>
        <text x="10" y="88" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">cv2.morphologyEx(img, cv2.MORPH_OPEN, k)</text>
      </g>
    </g>
  </g>

  <!-- Closing -->
  <g transform="translate(30, 225)">
    <rect x="0" y="0" width="790" height="155" fill="white" rx="8" stroke="#7c3aed" stroke-width="2"/>
    <text x="395" y="22" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Closing = Dilation → Erosion  (Fills small holes)</text>

    <g transform="translate(25, 40)">
      <!-- Original with holes -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="25" y="15" width="70" height="55" fill="#333" rx="3"/>
        <!-- Small holes -->
        <rect x="35" y="25" width="8" height="8" fill="white"/>
        <rect x="55" y="35" width="6" height="6" fill="white"/>
        <rect x="70" y="50" width="7" height="7" fill="white"/>
        <text x="60" y="100" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Original + holes</text>
      </g>

      <!-- Arrow 1 -->
      <g transform="translate(135, 35)">
        <text x="0" y="10" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600">Dilate</text>
        <text x="28" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="16">→</text>
      </g>

      <!-- After dilation -->
      <g transform="translate(190, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="20" y="10" width="80" height="65" fill="#333" rx="3"/>
        <!-- Holes filled, object larger -->
        <text x="60" y="100" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Holes filled</text>
      </g>

      <!-- Arrow 2 -->
      <g transform="translate(325, 35)">
        <text x="0" y="10" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600">Erode</text>
        <text x="30" y="30" fill="#333" font-family="Segoe UI, sans-serif" font-size="16">→</text>
      </g>

      <!-- After closing (final) -->
      <g transform="translate(380, 0)">
        <rect x="0" y="0" width="120" height="85" fill="#f8f9fa" stroke="#ddd" rx="4"/>
        <rect x="25" y="15" width="70" height="55" fill="#333" rx="3"/>
        <text x="60" y="100" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Closed (filled)</text>
      </g>

      <!-- Properties -->
      <g transform="translate(525, 5)">
        <text x="0" y="0" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600">Properties:</text>
        <text x="0" y="18" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="8">✓ Fills small dark holes</text>
        <text x="0" y="33" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="8">✓ Connects nearby objects</text>
        <text x="0" y="48" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="8">✓ Smooths external boundary</text>
        <text x="0" y="65" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="9" font-weight="600">A • B = (A ⊕ B) ⊖ B</text>
        <rect x="0" y="75" width="205" height="20" fill="#1e293b" rx="3"/>
        <text x="10" y="88" fill="#a78bfa" font-family="Consolas, monospace" font-size="8">cv2.morphologyEx(img, cv2.MORPH_CLOSE, k)</text>
      </g>
    </g>
  </g>
</svg>
