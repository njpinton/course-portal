<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 400" role="img" aria-label="Frequency domain image restoration using Fourier transforms">
  <title>Frequency Domain Restoration</title>
  <desc>Pipeline showing degraded image transformation to frequency domain, filtering, and inverse transform back to spatial domain</desc>

  <defs>
    <linearGradient id="freqBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
    <marker id="arrow3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1a3a6e"/>
    </marker>
  </defs>

  <rect width="850" height="400" fill="url(#freqBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="35" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Frequency Domain Restoration</text>

  <!-- Key equation -->
  <rect x="250" y="50" width="350" height="35" fill="white" rx="6" stroke="#1a3a6e" stroke-width="2"/>
  <text x="425" y="73" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="14" font-weight="600" text-anchor="middle">G(u,v) = H(u,v)·F(u,v) + N(u,v)</text>

  <!-- Pipeline -->
  <g transform="translate(30, 110)">
    <!-- Step 1: Degraded image -->
    <g transform="translate(0, 50)">
      <rect x="0" y="0" width="100" height="85" fill="#ef4444" rx="6" stroke="#dc2626" stroke-width="2"/>
      <rect x="15" y="15" width="70" height="55" fill="#777" rx="3"/>
      <text x="50" y="100" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">g(x,y)</text>
      <text x="50" y="113" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Spatial</text>
    </g>

    <!-- Arrow + FFT -->
    <g transform="translate(105, 80)">
      <rect x="0" y="0" width="50" height="25" fill="#3b82f6" rx="4"/>
      <text x="25" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600" text-anchor="middle">FFT</text>
      <line x1="55" y1="12" x2="75" y2="12" stroke="#1a3a6e" stroke-width="2" marker-end="url(#arrow3)"/>
    </g>

    <!-- Step 2: Frequency domain degraded -->
    <g transform="translate(185, 50)">
      <rect x="0" y="0" width="100" height="85" fill="#7c3aed" rx="6" stroke="#6d28d9" stroke-width="2"/>
      <!-- Frequency spectrum visualization -->
      <rect x="15" y="15" width="70" height="55" fill="#1a1a2e" rx="3"/>
      <circle cx="50" cy="42" r="20" fill="#fff" opacity="0.8"/>
      <circle cx="50" cy="42" r="12" fill="#fff" opacity="0.5"/>
      <circle cx="50" cy="42" r="5" fill="#fff"/>
      <text x="50" y="100" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">G(u,v)</text>
      <text x="50" y="113" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Frequency</text>
    </g>

    <!-- Arrow + Restoration filter -->
    <g transform="translate(290, 50)">
      <line x1="0" y1="42" x2="25" y2="42" stroke="#1a3a6e" stroke-width="2" marker-end="url(#arrow3)"/>
      <rect x="30" y="0" width="100" height="85" fill="#f97316" rx="6" stroke="#ea580c" stroke-width="2"/>
      <text x="80" y="25" fill="white" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Restoration</text>
      <text x="80" y="42" fill="white" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Filter</text>
      <text x="80" y="62" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">R(u,v)</text>
      <text x="80" y="100" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Wiener, Inverse...</text>
      <line x1="135" y1="42" x2="160" y2="42" stroke="#1a3a6e" stroke-width="2" marker-end="url(#arrow3)"/>
    </g>

    <!-- Step 3: Filtered frequency -->
    <g transform="translate(455, 50)">
      <rect x="0" y="0" width="100" height="85" fill="#7c3aed" rx="6" stroke="#6d28d9" stroke-width="2"/>
      <rect x="15" y="15" width="70" height="55" fill="#1a1a2e" rx="3"/>
      <circle cx="50" cy="42" r="18" fill="#fff" opacity="0.9"/>
      <circle cx="50" cy="42" r="10" fill="#fff" opacity="0.7"/>
      <circle cx="50" cy="42" r="4" fill="#fff"/>
      <text x="50" y="100" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">F̂(u,v)</text>
      <text x="50" y="113" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Filtered</text>
    </g>

    <!-- Arrow + IFFT -->
    <g transform="translate(560, 80)">
      <rect x="0" y="0" width="50" height="25" fill="#3b82f6" rx="4"/>
      <text x="25" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600" text-anchor="middle">IFFT</text>
      <line x1="55" y1="12" x2="75" y2="12" stroke="#1a3a6e" stroke-width="2" marker-end="url(#arrow3)"/>
    </g>

    <!-- Step 4: Restored image -->
    <g transform="translate(640, 50)">
      <rect x="0" y="0" width="100" height="85" fill="#10b981" rx="6" stroke="#059669" stroke-width="2"/>
      <rect x="15" y="15" width="70" height="55" fill="#888" rx="3"/>
      <rect x="30" y="30" width="40" height="25" fill="#aaa" stroke="#333" stroke-width="1"/>
      <text x="50" y="100" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">f̂(x,y)</text>
      <text x="50" y="113" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Restored</text>
    </g>
  </g>

  <!-- Filter types -->
  <g transform="translate(30, 270)">
    <text x="395" y="0" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="14" font-weight="600" text-anchor="middle">Common Restoration Filters</text>

    <!-- Inverse filter -->
    <g transform="translate(0, 20)">
      <rect x="0" y="0" width="190" height="85" fill="white" rx="6" stroke="#3b82f6"/>
      <text x="95" y="20" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Inverse Filter</text>
      <text x="95" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">F̂(u,v) = G(u,v) / H(u,v)</text>
      <text x="95" y="58" fill="#ef4444" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">⚠ Amplifies noise at zeros</text>
      <text x="95" y="73" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Simple but unstable</text>
    </g>

    <!-- Wiener filter -->
    <g transform="translate(205, 20)">
      <rect x="0" y="0" width="190" height="85" fill="white" rx="6" stroke="#10b981"/>
      <text x="95" y="20" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Wiener Filter</text>
      <text x="95" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">R = H*/(|H|² + K)</text>
      <text x="95" y="58" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">✓ Balances blur &amp; noise</text>
      <text x="95" y="73" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Optimal for known SNR</text>
    </g>

    <!-- Constrained LS -->
    <g transform="translate(410, 20)">
      <rect x="0" y="0" width="190" height="85" fill="white" rx="6" stroke="#f97316"/>
      <text x="95" y="20" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Constrained LS</text>
      <text x="95" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">min ||g-Hf||² + γ||Cf||²</text>
      <text x="95" y="58" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">✓ Regularized solution</text>
      <text x="95" y="73" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Smooth result control</text>
    </g>

    <!-- Lucy-Richardson -->
    <g transform="translate(615, 20)">
      <rect x="0" y="0" width="190" height="85" fill="white" rx="6" stroke="#7c3aed"/>
      <text x="95" y="20" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Richardson-Lucy</text>
      <text x="95" y="40" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">f̂ₙ₊₁ = f̂ₙ · (g/Hf̂ₙ) * H*</text>
      <text x="95" y="58" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">✓ Iterative, non-negative</text>
      <text x="95" y="73" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Good for Poisson noise</text>
    </g>
  </g>
</svg>
