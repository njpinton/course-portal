<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380" role="img" aria-label="Adaptive filtering demonstration showing local statistics adaptation">
  <title>Adaptive Filtering Demo</title>
  <desc>Visualization of adaptive filtering that adjusts filter strength based on local image statistics</desc>

  <defs>
    <linearGradient id="adaptBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="800" height="380" fill="url(#adaptBg)" rx="8"/>

  <!-- Title -->
  <text x="400" y="35" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Adaptive Filtering</text>
  <text x="400" y="55" fill="#666" font-family="Segoe UI, sans-serif" font-size="13" text-anchor="middle">Filter strength adapts to local image characteristics</text>

  <!-- Main concept visualization -->
  <g transform="translate(50, 80)">
    <!-- Image with regions -->
    <g transform="translate(0, 0)">
      <text x="150" y="0" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="14" font-weight="600" text-anchor="middle">Input Image Regions</text>

      <rect x="0" y="20" width="300" height="180" fill="#888" rx="6" stroke="#1a3a6e" stroke-width="2"/>

      <!-- Smooth region (top-left) -->
      <rect x="10" y="30" width="130" height="75" fill="#777" rx="4"/>
      <text x="75" y="70" fill="#ddd" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Smooth Region</text>
      <text x="75" y="85" fill="#aaa" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">(low variance)</text>

      <!-- Edge region (top-right) -->
      <rect x="160" y="30" width="130" height="75" fill="#555" rx="4"/>
      <rect x="220" y="30" width="70" height="75" fill="#aaa" rx="0 4 4 0"/>
      <line x1="220" y1="30" x2="220" y2="105" stroke="#1a3a6e" stroke-width="2"/>
      <text x="225" y="70" fill="#333" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Edge</text>
      <text x="225" y="85" fill="#555" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">(high var)</text>

      <!-- Textured region (bottom) -->
      <rect x="10" y="115" width="280" height="75" fill="#666" rx="4"/>
      <!-- Texture pattern -->
      <g fill="#555" fill-opacity="0.5">
        <circle cx="30" cy="135" r="5"/>
        <circle cx="55" cy="150" r="4"/>
        <circle cx="80" cy="130" r="6"/>
        <circle cx="105" cy="155" r="5"/>
        <circle cx="130" cy="140" r="4"/>
        <circle cx="155" cy="160" r="5"/>
        <circle cx="180" cy="135" r="6"/>
        <circle cx="205" cy="150" r="4"/>
        <circle cx="230" cy="145" r="5"/>
        <circle cx="255" cy="165" r="4"/>
      </g>
      <text x="150" y="178" fill="#ccc" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Textured Region (medium variance)</text>
    </g>

    <!-- Arrow -->
    <g transform="translate(320, 110)">
      <rect x="0" y="0" width="80" height="30" fill="#1a3a6e" rx="4"/>
      <text x="40" y="20" fill="white" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600" text-anchor="middle">Analyze</text>
      <polygon points="80,15 95,0 95,30" fill="#1a3a6e"/>
    </g>

    <!-- Adaptive response -->
    <g transform="translate(420, 0)">
      <text x="150" y="0" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="14" font-weight="600" text-anchor="middle">Adaptive Filter Response</text>

      <rect x="0" y="20" width="300" height="180" fill="white" rx="6" stroke="#1a3a6e" stroke-width="2"/>

      <!-- Smooth region response -->
      <g transform="translate(10, 30)">
        <rect x="0" y="0" width="130" height="75" fill="#dbeafe" rx="4" stroke="#3b82f6"/>
        <text x="65" y="25" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Strong Filtering</text>
        <text x="65" y="42" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Low variance detected</text>
        <text x="65" y="55" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">→ More smoothing OK</text>
        <rect x="20" y="60" width="90" height="8" fill="#3b82f6" rx="4"/>
      </g>

      <!-- Edge region response -->
      <g transform="translate(160, 30)">
        <rect x="0" y="0" width="130" height="75" fill="#fef3c7" rx="4" stroke="#f97316"/>
        <text x="65" y="25" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Weak Filtering</text>
        <text x="65" y="42" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">High variance detected</text>
        <text x="65" y="55" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">→ Preserve details</text>
        <rect x="45" y="60" width="40" height="8" fill="#f97316" rx="4"/>
      </g>

      <!-- Textured region response -->
      <g transform="translate(10, 115)">
        <rect x="0" y="0" width="280" height="75" fill="#d1fae5" rx="4" stroke="#10b981"/>
        <text x="140" y="25" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" text-anchor="middle">Medium Filtering</text>
        <text x="140" y="42" fill="#666" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Medium variance → Balance noise reduction and detail preservation</text>
        <rect x="80" y="55" width="120" height="8" fill="#10b981" rx="4"/>
      </g>
    </g>
  </g>

  <!-- Formula and key concept -->
  <g transform="translate(50, 300)">
    <rect x="0" y="0" width="700" height="65" fill="white" rx="8" stroke="#1a3a6e" stroke-width="2"/>

    <text x="20" y="25" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600">Key Formula:</text>
    <text x="120" y="25" fill="#333" font-family="Segoe UI, sans-serif" font-size="12">f̂(x,y) = g(x,y) - (σ²<tspan font-size="9" dy="3">n</tspan><tspan dy="-3">/σ²</tspan><tspan font-size="9" dy="3">L</tspan><tspan dy="-3">)[g(x,y) - m</tspan><tspan font-size="9" dy="3">L</tspan><tspan dy="-3">]</tspan></text>

    <text x="20" y="50" fill="#666" font-family="Segoe UI, sans-serif" font-size="11">σ²<tspan font-size="8" dy="2">n</tspan><tspan dy="-2"> = noise variance | σ²</tspan><tspan font-size="8" dy="2">L</tspan><tspan dy="-2"> = local variance | m</tspan><tspan font-size="8" dy="2">L</tspan><tspan dy="-2"> = local mean</tspan></text>

    <line x1="420" y1="10" x2="420" y2="55" stroke="#e5e7eb" stroke-width="1"/>

    <text x="440" y="25" fill="#10b981" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600">High local variance (σ²<tspan font-size="8" dy="2">L</tspan><tspan dy="-2"> >> σ²</tspan><tspan font-size="8" dy="2">n</tspan><tspan dy="-2">)</tspan></text>
    <text x="440" y="40" fill="#666" font-family="Segoe UI, sans-serif" font-size="10">→ Keep original (preserve features)</text>

    <text x="440" y="55" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600">Low local variance (σ²<tspan font-size="8" dy="2">L</tspan><tspan dy="-2"> ≈ σ²</tspan><tspan font-size="8" dy="2">n</tspan><tspan dy="-2">)</tspan></text>
    <text x="580" y="55" fill="#666" font-family="Segoe UI, sans-serif" font-size="10">→ Replace with mean</text>
  </g>
</svg>