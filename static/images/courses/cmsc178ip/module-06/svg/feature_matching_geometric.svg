<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 400" role="img" aria-label="Feature matching for geometric transformation estimation">
  <title>Feature Matching for Geometry</title>
  <desc>How feature correspondences are used to estimate geometric transformations with RANSAC</desc>

  <defs>
    <linearGradient id="featBg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa"/>
      <stop offset="100%" style="stop-color:#e9ecef"/>
    </linearGradient>
  </defs>

  <rect width="850" height="400" fill="url(#featBg)" rx="8"/>

  <!-- Title -->
  <text x="425" y="32" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="20" font-weight="600" text-anchor="middle">Feature Matching for Transformation Estimation</text>

  <!-- Matching visualization -->
  <g transform="translate(30, 60)">
    <rect x="0" y="0" width="470" height="185" fill="white" rx="8" stroke="#3b82f6" stroke-width="2"/>
    <text x="235" y="25" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Feature Correspondences</text>

    <!-- Image 1 -->
    <g transform="translate(20, 40)">
      <rect x="0" y="0" width="180" height="120" fill="#dbeafe" rx="4" stroke="#3b82f6"/>
      <text x="90" y="-5" fill="#3b82f6" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Image 1 (Reference)</text>

      <!-- Features with IDs -->
      <circle cx="30" cy="25" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="30" y="28" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">1</text>

      <circle cx="90" cy="20" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="90" y="23" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">2</text>

      <circle cx="150" cy="35" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="150" y="38" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">3</text>

      <circle cx="45" cy="70" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="45" y="73" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">4</text>

      <circle cx="120" cy="85" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="120" y="88" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">5</text>

      <!-- Outlier -->
      <circle cx="160" cy="100" r="6" fill="#ef4444" stroke="#dc2626" stroke-width="2"/>
      <text x="160" y="103" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">X</text>
    </g>

    <!-- Image 2 -->
    <g transform="translate(270, 40)">
      <rect x="0" y="0" width="180" height="120" fill="#fed7aa" rx="4" stroke="#f97316"/>
      <text x="90" y="-5" fill="#f97316" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Image 2 (Moving)</text>

      <!-- Corresponding features (transformed positions) -->
      <circle cx="50" cy="30" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="50" y="33" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">1</text>

      <circle cx="110" cy="22" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="110" y="25" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">2</text>

      <circle cx="165" cy="45" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="165" y="48" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">3</text>

      <circle cx="60" cy="78" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="60" y="81" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">4</text>

      <circle cx="130" cy="95" r="6" fill="#10b981" stroke="#059669" stroke-width="2"/>
      <text x="130" y="98" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">5</text>

      <!-- Wrong match (outlier) -->
      <circle cx="30" cy="60" r="6" fill="#ef4444" stroke="#dc2626" stroke-width="2"/>
      <text x="30" y="63" fill="white" font-family="Segoe UI, sans-serif" font-size="8" text-anchor="middle">X</text>
    </g>

    <!-- Match lines -->
    <g stroke-width="1.5">
      <line x1="56" y1="105" x2="320" y2="110" stroke="#10b981"/>
      <line x1="116" y1="100" x2="380" y2="102" stroke="#10b981"/>
      <line x1="176" y1="115" x2="435" y2="125" stroke="#10b981"/>
      <line x1="71" y1="150" x2="330" y2="158" stroke="#10b981"/>
      <line x1="146" y1="165" x2="400" y2="175" stroke="#10b981"/>
      <!-- Outlier match -->
      <line x1="186" y1="180" x2="300" y2="140" stroke="#ef4444" stroke-dasharray="4,2"/>
    </g>

    <!-- Legend -->
    <g transform="translate(160, 170)">
      <circle cx="8" cy="5" r="5" fill="#10b981"/>
      <text x="20" y="9" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Inlier matches (good)</text>
      <circle cx="148" cy="5" r="5" fill="#ef4444"/>
      <text x="160" y="9" fill="#666" font-family="Segoe UI, sans-serif" font-size="9">Outlier (wrong match)</text>
    </g>
  </g>

  <!-- RANSAC explanation -->
  <g transform="translate(520, 60)">
    <rect x="0" y="0" width="300" height="185" fill="white" rx="8" stroke="#7c3aed" stroke-width="2"/>
    <text x="150" y="25" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">RANSAC Algorithm</text>

    <g transform="translate(15, 40)">
      <!-- Steps -->
      <g transform="translate(0, 0)">
        <circle cx="12" cy="12" r="10" fill="#7c3aed"/>
        <text x="12" y="16" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">1</text>
        <text x="30" y="16" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Random sample (4 points for H)</text>
      </g>

      <g transform="translate(0, 30)">
        <circle cx="12" cy="12" r="10" fill="#7c3aed"/>
        <text x="12" y="16" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">2</text>
        <text x="30" y="16" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Fit model (compute H)</text>
      </g>

      <g transform="translate(0, 60)">
        <circle cx="12" cy="12" r="10" fill="#7c3aed"/>
        <text x="12" y="16" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">3</text>
        <text x="30" y="16" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Count inliers (within threshold)</text>
      </g>

      <g transform="translate(0, 90)">
        <circle cx="12" cy="12" r="10" fill="#7c3aed"/>
        <text x="12" y="16" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">4</text>
        <text x="30" y="16" fill="#333" font-family="Segoe UI, sans-serif" font-size="10">Repeat, keep best H</text>
      </g>
    </g>

    <rect x="15" y="145" width="270" height="30" fill="#f5f3ff" rx="4"/>
    <text x="150" y="163" fill="#7c3aed" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Robust to outliers (wrong matches)</text>
  </g>

  <!-- Requirements table -->
  <g transform="translate(30, 265)">
    <rect x="0" y="0" width="790" height="115" fill="white" rx="8" stroke="#1a3a6e" stroke-width="2"/>
    <text x="395" y="25" fill="#1a3a6e" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" text-anchor="middle">Minimum Points for Different Transformations</text>

    <!-- Table -->
    <g transform="translate(30, 45)">
      <!-- Headers -->
      <rect x="0" y="0" width="180" height="25" fill="#1a3a6e" rx="3"/>
      <text x="90" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Transformation</text>
      <rect x="190" y="0" width="80" height="25" fill="#1a3a6e" rx="3"/>
      <text x="230" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">DOF</text>
      <rect x="280" y="0" width="100" height="25" fill="#1a3a6e" rx="3"/>
      <text x="330" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Min Points</text>
      <rect x="390" y="0" width="340" height="25" fill="#1a3a6e" rx="3"/>
      <text x="560" y="17" fill="white" font-family="Segoe UI, sans-serif" font-size="10" text-anchor="middle">Use Case</text>

      <!-- Row 1 -->
      <rect x="0" y="28" width="180" height="22" fill="#dbeafe"/>
      <text x="90" y="43" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Rigid (rotation + translation)</text>
      <text x="230" y="43" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">3</text>
      <text x="330" y="43" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">2</text>
      <text x="560" y="43" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Scanned documents, rigid objects</text>

      <!-- Row 2 -->
      <rect x="0" y="52" width="180" height="22" fill="#d1fae5"/>
      <text x="90" y="67" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Affine</text>
      <text x="230" y="67" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">6</text>
      <text x="330" y="67" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">3</text>
      <text x="560" y="67" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Satellite imagery, parallel views</text>

      <!-- Row 3 -->
      <rect x="0" y="76" width="730" height="22" fill="#ede9fe"/>
      <text x="90" y="91" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Homography (projective)</text>
      <text x="230" y="91" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">8</text>
      <text x="330" y="91" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">4</text>
      <text x="560" y="91" fill="#333" font-family="Segoe UI, sans-serif" font-size="9" text-anchor="middle">Panoramas, planar scenes, AR</text>
    </g>
  </g>
</svg>
